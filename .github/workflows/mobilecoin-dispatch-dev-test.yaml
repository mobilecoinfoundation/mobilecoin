# Copyright (c) 2018-2022 The MobileCoin Foundation
#
# MobileCoin Core projects - Dispatch (manual) Job - Run integration tests in a development namespace.

name: (Manual) Run Tests in Dev Namespace

run-name: Test ${{ inputs.namespace }} - ${{ inputs.ingest_color }}

on:
  workflow_dispatch:
    inputs:
      namespace:
        description: "Target Namespace"
        type: string
        required: true
      ingest_color:
        description: "Fog Ingest blue/green"
        type: choice
        required: true
        default: blue
        options:
        - blue
        - green
      fog_distribution:
        description: "Run fog-distribution test"
        type: boolean
        required: false
        default: false
      fog_and_minting:
        description: "Run fog-test-client and minting tests"
        type: boolean
        required: false
        default: true
      mobilecoind:
        description: "Run mobilecoind tests"
        type: boolean
        required: false
        default: true

jobs:
  test:
    uses: ./.github/workflows/mobilecoin-workflow-dev-test.yaml
    with:
      namespace: ${{ inputs.namespace }}
      ingest_color: ${{ inputs.ingest_color }}
      fog_distribution: ${{ inputs.fog_distribution }}
      fog_and_minting: ${{ inputs.fog_and_minting }}
      mobilecoind: ${{ inputs.mobilecoind }}
    secrets: inherit
